"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[34],{7034:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});a(9665);var o=a(9835),s=a(499),i=a(8072),l=a(9302),r=a(8339);const n={class:"row justify-center q-pa-md"},c={__name:"Create",setup(e){const t=(0,r.tv)(),a=(0,l.Z)(),c=(0,s.iH)(null),u=(0,s.iH)({firstName:"",lastName:"",middleName:"",birthDate:"",description:""}),m={firstName:[e=>!!e||"Обязательное поле"],lastName:[e=>!!e||"Обязательное поле"],middleName:[e=>!!e||"Обязательное поле"],birthDate:[e=>!!e||"Обязательное поле"],description:[e=>!!e||"Обязательное поле"]};async function p(){const e=await c.value.validate();if(e)try{let e=JSON.parse(localStorage.getItem("dataTable"))||[],t={};for(const a in u.value)t="birthDate"===a?{...t,[a]:u.value[a]?u.value[a].split(".").reverse().join("/"):null}:{...t,[a]:u.value[a]};e.push(t);for(let a=0;a<e.length;a++)e[a].id=a+1;localStorage.setItem("dataTable",JSON.stringify(e)),d(),await c.value.resetValidate(),a.notify({type:"positive",message:"Данные успешно сохранены",position:"bottom-right"})}catch(t){console.error(t),console.error("ERROR IN sendRequest"),a.notify({type:"negative",message:"Произошла ошибка!",position:"bottom-right"})}else a.notify({type:"negative",message:"Заполните обязательные поля!",position:"bottom-right"})}function d(){for(const e in u.value)u.value[e]=""}return(0,r.iS)(((e,t,a)=>{let o=!1;for(const s of Object.values(u.value))if(s){o=!0;break}if(o){const e=window.confirm("Вы уверены, что хотите покинуть эту страницу? У вас остались несохраненные данные.");e?a():a(!1)}else a()})),(e,a)=>{const l=(0,o.up)("q-btn"),r=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(r,{class:"q-px-sm q-py-md"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,s.SU)(i.Z),{ref_key:"FormDataRef",ref:c,data:u.value,rules:m,onUpdateField:a[0]||(a[0]=(e,t)=>u.value[t]=e)},null,8,["data"]),(0,o._)("div",n,[(0,o.Wm)(l,{class:"q-mr-sm",color:"primary",label:"Отменить",onClick:a[1]||(a[1]=e=>(0,s.SU)(t).go(-1))}),(0,o.Wm)(l,{color:"primary",label:"Сохранить",onClick:p})])])),_:1})}}};var u=a(7321),m=a(4455),p=a(9984),d=a.n(p);const f=c,v=f;d()(c,"components",{QPage:u.Z,QBtn:m.Z})}}]);