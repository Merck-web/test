"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[501],{8501:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});a(6204),a(7924);var o=a(9835),l=a(499),i=a(8417),s=a(9302),n=a(8072),r=a(8907);const u=(0,o._)("div",{class:"col"},[(0,o._)("div",{class:"text-h5 text-white"}," Редактирование ")],-1),c={class:"col-auto"},d={__name:"Edit",setup(e){const t=(0,s.Z)(),a=(0,l.iH)([]),d=(0,l.iH)(!1),p=(0,l.iH)(null),v=(0,l.iH)({}),m={firstName:[e=>!!e||"Обязательное поле"],lastName:[e=>!!e||"Обязательное поле"],middleName:[e=>!!e||"Обязательное поле"],birthDate:[e=>!!e||"Обязательное поле"],description:[e=>!!e||"Обязательное поле"]};function g(e){try{const o=a.value.findIndex((t=>t.id===e));a.value.splice(o,1);for(let e=0;e<a.value.length;e++)a.value[e].id=e+1;localStorage.setItem("dataTable",JSON.stringify(a.value)),t.notify({type:"positive",message:"Строка успешно удалена",position:"bottom-right"})}catch(o){console.error(o),console.error("ERROR IN deleteRow"),t.notify({type:"negative",message:"Произошла ошибка",position:"bottom-right"})}}async function f(e){try{const t=a.value.find((t=>t.id===e));v.value=structuredClone(t),v.value.birthDate=(0,r.Z)(v.value.birthDate),await(0,o.Y3)(),d.value=!0}catch(l){console.error(l),console.error("ERROR IN editRow"),t.notify({type:"negative",message:"Произошла ошибка",position:"bottom-right"})}}async function h(){const e=await p.value.validate();try{if(e){const e=a.value.findIndex((e=>e.id===v.value.id)),o=v.value.birthDate?v.value.birthDate.split(".").reverse().join("/"):null;a.value[e]={...v.value,birthDate:o},localStorage.setItem("dataTable",JSON.stringify(a.value)),t.notify({type:"positive",message:"Данны успешно заменены",position:"bottom-right"})}else t.notify({type:"negative",message:"Заполните обязательные поля!",position:"bottom-right"})}catch(o){console.error(o),console.error("ERROR IN approveChanges"),t.notify({type:"negative",message:"Произошла ошибка",position:"bottom-right"})}finally{e&&(d.value=!1)}}return(0,o.bv)((e=>{a.value=JSON.parse(localStorage.getItem("dataTable"))||[]})),(e,t)=>{const s=(0,o.up)("q-btn"),r=(0,o.up)("q-card-section"),y=(0,o.up)("q-card-actions"),b=(0,o.up)("q-card"),w=(0,o.up)("q-dialog"),R=(0,o.up)("q-page"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(R,{class:"q-px-sm q-py-md"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(i.Z),{data:a.value,onDeleteRow:g,onEditRow:f},null,8,["data"]),(0,o.Wm)(w,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),onBeforeHide:t[2]||(t[2]=e=>v.value.value={})},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{style:{width:"100%","max-width":"1000px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"row items-center bg-primary text-white"},{default:(0,o.w5)((()=>[u,(0,o._)("div",c,[(0,o.wy)((0,o.Wm)(s,{icon:"close",color:"white",dense:"",flat:"",round:""},null,512),[[_]])])])),_:1}),(0,o.Wm)(r,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(n.Z),{ref_key:"FormDataRef",ref:p,data:v.value,rules:m,onUpdateField:t[0]||(t[0]=(e,t)=>v.value[t]=e)},null,8,["data"])])),_:1}),(0,o.Wm)(y,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(s,{color:"secondary",label:"Отменить"},null,512),[[_]]),(0,o.Wm)(s,{color:"primary",label:"Изменить",onClick:h})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var p=a(7321),v=a(3706),m=a(4458),g=a(3190),f=a(4455),h=a(1821),y=a(2146),b=a(9984),w=a.n(b);const R=d,_=R;w()(d,"components",{QPage:p.Z,QDialog:v.Z,QCard:m.Z,QCardSection:g.Z,QBtn:f.Z,QCardActions:h.Z}),w()(d,"directives",{ClosePopup:y.Z})}}]);